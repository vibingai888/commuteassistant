<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podcast Generator - Create & Discover Podcasts</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <h1>üéôÔ∏è Podcast Generator</h1>
        
        <div class="api-url">
            <strong>API URL:</strong> <span id="apiUrl">Loading...</span>
            <div class="api-controls">
                <div class="mock-group">
                    <label style="display:inline-flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="mockBackend"> Mock Backend (use sample audio)
                    </label>
                </div>
                <div class="toggle-row" id="toggleGroup">
                    <span class="toggle-label">Localhost</span>
                    <label class="switch">
                        <input type="checkbox" id="modeSwitch">
                        <span class="slider"></span>
                    </label>
                    <span class="toggle-label">GCP</span>
                </div>
                <div class="advanced-group">
                    <label style="display:inline-flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="advancedMode"> Advanced (custom URL)
                    </label>
                </div>
                <div class="custom-url-group" id="customGroup">
                    <input id="apiUrlInput" type="text" placeholder="https://your-custom-api-url">
                    <button id="saveApiUrlBtn" type="button">Save URL</button>
                </div>
            </div>
        </div>
        
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="create">Create Podcast</button>
            <button class="tab-btn" data-tab="feeds">Discover Podcasts</button>
        </div>
        
        <!-- Create Podcast Tab -->
        <div id="create-tab" class="tab-content active">
            <form id="podcastForm">
                <div class="form-group">
                    <label for="topic">Podcast Topic:</label>
                    <input type="text" id="topic" name="topic" placeholder="e.g., Artificial Intelligence in Healthcare" required>
                    <div id="chips" class="chips-row"></div>
                </div>
                
                <div class="form-group">
                    <label for="duration">Duration: <span id="durationDisplay">3</span> minutes</label>
                    <div class="duration-input">
                        <button type="button" class="duration-btn" data-value="1">1 min</button>
                        <button type="button" class="duration-btn" data-value="3">3 min</button>
                        <button type="button" class="duration-btn" data-value="5">5 min</button>
                        <button type="button" class="duration-btn" data-value="10">10 min</button>
                        <button type="button" class="duration-btn" data-value="15">15 min</button>
                        <button type="button" class="duration-btn" data-value="20">20 min</button>
                        <button type="button" class="duration-btn" data-value="30">30 min</button>
                    </div>
                    <input type="hidden" id="minutes" name="minutes" value="3">
                </div>
                
                <button type="submit" id="generateBtn">üéµ Generate Podcast</button>
            </form>
            
            <div id="status" class="status" style="display: none;"></div>
            
            <div id="audioPlayer" class="audio-player" style="display: none;">
                <div class="play-meta">
                    <span id="wordsMeta">Words: 0/0</span>
                    <span id="elapsedMeta">Generated: 00:00</span>
                </div>
                <div id="bufferBar" class="buffer-bar"></div>
                <audio id="audio" controls></audio>
            </div>
        </div>
        
        <!-- Discover Podcasts Tab -->
        <div id="feeds-tab" class="tab-content">
            <div class="feeds-header">
                <h2>üéß Discover Podcasts</h2>
                <div class="feeds-controls">
                    <select id="sortBy">
                        <option value="created_at">Latest</option>
                        <option value="plays">Most Popular</option>
                        <option value="likes">Most Liked</option>
                    </select>
                    <button id="refreshFeeds" class="refresh-btn">üîÑ Refresh</button>
                    <button id="forceGcpMode" class="force-gcp-btn">üåê Force GCP</button>
                </div>
            </div>
            
            <div id="feedsLoading" class="loading">Loading podcasts...</div>
            <div id="feedsError" class="error" style="display: none;"></div>
            
            <div id="podcastsList" class="podcasts-list"></div>
            
            <div id="feedsPagination" class="pagination" style="display: none;">
                <button id="prevPage" class="page-btn">‚Üê Previous</button>
                <span id="pageInfo">Page 1</span>
                <button id="nextPage" class="page-btn">Next ‚Üí</button>
            </div>
        </div>
        
        <div class="logs" id="logs"></div>
    </div>

    <!-- Load JavaScript modules -->
    <script src="js/api-client.js"></script>
    <script src="js/audio-player.js"></script>
    <script src="js/ui-components.js"></script>
    <script src="js/feeds-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
